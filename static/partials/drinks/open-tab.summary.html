<form ng-submit="submit()">
  <div class="list-group-item media clearfix" ng-repeat="user in tab.users">
    <div class="col-xs-2">
      <div class="row">
        <img class="media-object" ng-src="{[{ user.avatar }]}" height="40px">
      </div>
    </div>
    <div class="col-xs-8">
      <h4 class="media-heading">{[{ (user.email) ? user.email : user.first_name + ' ' + user.last_name }]}</h4>
      <p class="text-success">{[{ tab.amount | currency }]}</p>
    </div>
    <div class="col-xs-2">
      <button type="button" class="close" aria-label="Close" ng-click="removeUser($index)"><span aria-hidden="true">&times;</span></button>
    </div>
  </div>
  <div class="list-group-item media clearfix">
    <div class="col-xs-2">
      <p>Total:</p>
    </div>
    <div class="col-xs-10">
      <h4 class="media-heading">{[{ tab.total | currency }]}</h4>
    </div>
  </div>
  <!-- <div class="list-group-item">
    <dl class="dl-horizontal">
      <dt>For:</dt>
      <dd><span ng-repeat="email in tab.emails">{[{ email }]}&nbsp;</span></dd>
    </dl>
  </div>
  <div class="list-group-item">
    <dl class="dl-horizontal">
      <dt>Cost:</dt>
      <dd>{[{ tab.amount | currency }]}</dd>
    </dl>
  </div> -->
  <div class="list-group-item" payment-source>
    <dl class="dl-horizontal">
      <dt>Payment Method:</dt>
      <dd dropdown>
        <a href dropdown-toggle>{[{ (selectedSource)?selectedSource.object + ' *' + selectedSource.last4 : 'Select' }]}&nbsp;<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li ng-repeat="source in sources"><a href ng-click="selectSource(source)">{[{ source.object }]} *{[{ source.last4 }]}</a></li>
          <!-- <li class="divider"></li> -->
          <!-- <li><a href ui-sref="profile">Add New</a></li> -->
        </ul>
      </dd>
    </dl>
  </div>
  <div class="list-group-item" max-length="140">
    <textarea rows="4" ng-model="tab.note" class="form-control input-lg" ng-change="calc(tab.note)" placeholder="Add a note.."></textarea>
    <p ng-class="{'text-danger': length > maxLength}">{[{ length || 0 }]} / {[{ maxLength }]}</p>
  </div>
  <div class="list-group-item clearfix">
    <loader model="loading" class="pull-left"></loader>
    <button type="submit" class="btn btn-primary btn-lg pull-right">Submit</button>
  </div>
</form>
<script type="text/ng-template" id="select-payment-method.html">
  <form name="form" create-card-form>
    <div class="modal-header">
      <h3 class="modal-title">Add new credit/debit card</h3>
    </div>
    <div class="modal-body">
      <div create-card-form-body></div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-link btn-lg" type="button" ng-click="$dismiss('cancel')">Cancel</button>
      <button class="btn btn-primary btn-lg" type="submit">Add</button>
    </div>
  </form>
</script>
